---
globs: *.py, *.js, *.ts, *.jsx, *.tsx, *.go, *.java
alwaysApply: false
---
开发协作规范

为了确保开发过程顺利，我们约定以下协作方式：

-  **受控制的操作:** 一些特定操作需要用户确认后才能执行。
   - **数据库操作:** 当需要执行数据库迁移、修改或查询时，AI 助手会生成相应的 SQL 语句。生成后，AI 助手会暂停执行，等待用户确认并在外部（如数据库客户端）执行这些语句。
   - **代码修改脚本:** 当需要修改代码时，AI 助手会生成相应的代码修改脚本。生成后，AI 助手会暂停执行，等待用户确认并在外部（如编辑器）执行这些脚本。

-  **依赖包安装:** 当项目需要添加新的依赖包时，AI 助手会生成相应的包管理器命令。生成后，AI 助手会暂停执行，等待用户在终端中执行该命令。常见示例：
    - Python: `pip install <package>` 或 `uv add <package>` 或 `poetry add <package>`
    - Go: `go get <package>`
    - Java: 在 `pom.xml` 或 `build.gradle` 中添加依赖

-  **最小化变更原则:** 在实现特定具体需求时，应尽可能最小化代码变更，避免对项目进行大规模重构。优先考虑在现有架构基础上进行增量式开发，保持项目的稳定性和可维护性。
    - [VERY IMPORTANT] 不要过度设计，像Linus Torvalds的代码风格一样，简洁、高效、易于维护。

-  **API 规范同步:** 当修改 API 接口时，必须同步更新 API 文档。具体要求：
    - 更新 API 文档注释，确保与实际 API 行为一致（如 OpenAPI/Swagger 注释、JSDoc、docstring 等）
    - 更新相关的 schema 定义文件
    - 重新生成 API 文档文件（如 `openapi.json`、`swagger.yaml` 等）
    - 保证前端和其他服务能够基于最新的 API 规范进行开发和集成

-  **文档规范:** 当需要写文档或者更新文档的时候：
    - 请使用 `md` 格式，并使用 `markdown` 语法。
    - 如果项目根目录有docs目录，则将文档放在docs目录下，可执行创建分类文件夹。
    - 命名规则：`{分类}/{文件名}.md`，如 `api_docs/document_slice_api.md`。
    - [VERY IMPORTANT] 不要过度生成文档，小问题不需要生成文档，只需要在代码中添加注释即可，大改动或者完整重构才需要生成文档。

-  **代码规范:** 在编写代码时，遵循以下通用规范：
    - **注释要求:** 总是加足够的注释，包括函数级和函数步骤级；确保在你写完之后，reviewer能够快速理解你的意图
    - **导入规范:** 
      -   Python: 不使用相对导入，不使用 `*` 导入
      -   JavaScript/TypeScript: 优先使用具名导入，避免 `import *`
      -   其他语言: 遵循各语言的最佳实践
    - **依赖管理:** 如果发现异常导入，记得修复；如果发现缺少导入，记得添加
    - **类型注解:** 在支持类型注解的语言中（Python、TypeScript等），声明变量时尽可能注解类型，提高代码可读性

-  **模块介绍文件命名规范:**
    - 在 `src/core/` 目录下的各个子模块中，使用小写的 `introduction.md` 作为模块介绍文件
    - 不使用全大写的 `README.md`（README.md可能是自动生成的或历史遗留的）
    - 命名示例：
      ```
      src/core/di/introduction.md              # DI模块介绍
      src/core/addons/introduction.md          # Addons模块介绍
      src/core/component/introduction.md       # Component模块介绍
      ```
    - `introduction.md` 应包含：模块简介、目录结构、核心功能、使用示例、相关文档等
